<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantaprezze</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- Pulsante menu su mobile -->
    <button class="menu-button" onclick="toggleSidebar()">‚ò∞ Menu</button>

    <!-- Sidebar -->
    <aside id="sidebar">
        <button class="close-button" onclick="toggleSidebar()">‚úñ Chiudi</button>
        <button class="menu-item" onclick="showHome()">üè† Home</button>
        <button class="menu-item" onclick="openRegisterForm()">üìù Registrati</button>
        <button class="menu-item" onclick="showScores()">üìä Punteggi Squadre</button>
    </aside>        

    <!-- Contenuto principale -->
    <div class="content-container">
        <main id="main-content">
            <h1>Cosa √® accaduto tra le prezze</h1>
            <div id="recentEvents">Nessun evento registrato.</div>
        </main>
    </div>

    <!-- Modale di registrazione -->
    <div id="registerOverlay" onclick="closeRegisterForm()"></div>
    <div id="registerForm">
        <h2>Registrazione Squadra</h2>
        <label for="ownerName">Nome Proprietario:</label>
        <input type="text" id="ownerName"><br><br>
        <label for="teamName">Nome Squadra:</label>
        <input type="text" id="teamName"><br><br>
        <p>Seleziona 3 giocatori (budget massimo: 15 denari):</p>
        <div id="playersContainer"></div>
        <button onclick="registerTeam()">Salva Squadra</button>
        <button onclick="closeRegisterForm()">Chiudi</button>
    </div>

    <!-- Footer con immagine -->
    <footer>
        <img src="logo.png" alt="Fantaprezze Logo">
        <p>&copy; 2025 Fantaprezze</p>
    </footer>

    <script>
        function toggleSidebar() {
            document.getElementById("sidebar").classList.toggle("sidebar-open");
        }

        function showHome() {
            document.getElementById("main-content").innerHTML = `
                <h1>Cosa √® accaduto tra le prezze</h1>
                <div id="recentEvents">Nessun evento registrato.</div>
            `;
            toggleSidebar();
        }

        function showScores() {
            document.getElementById("main-content").innerHTML = `
                <h1>Punteggi Squadre</h1>
                <ul id="scoreList"></ul>
            `;
            loadScores();
            toggleSidebar();
        }

        function openRegisterForm() {
            document.getElementById("registerForm").style.display = "block";
            document.getElementById("registerOverlay").style.display = "block";
        }

        function closeRegisterForm() {
            document.getElementById("registerForm").style.display = "none";
            document.getElementById("registerOverlay").style.display = "none";
        }

        async function loadScores() {
            const teamsSnapshot = await getDocs(collection(db, "teams"));
            const scoreList = document.getElementById("scoreList");
            scoreList.innerHTML = "";

            teamsSnapshot.forEach(doc => {
                const team = doc.data();
                const listItem = document.createElement("li");
                listItem.textContent = `${team.teamName}: ${team.score} punti`;
                scoreList.appendChild(listItem);
            });
        }

        window.onload = () => {
            loadRecentEvents();
        };
    </script>

</body>
</html>
